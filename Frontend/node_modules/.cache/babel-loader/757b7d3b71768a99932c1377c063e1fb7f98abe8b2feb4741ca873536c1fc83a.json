{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{useSelector}from'react-redux';import{Navigate}from'react-router-dom';import Header from'../components/Header';import Footer from'../components/Footer';import'../styles/MatchHistory.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function MatchHistory(){const{isAuthenticated,user}=useSelector(state=>state.auth);const[gameHistory,setGameHistory]=useState([]);const[currentPage,setCurrentPage]=useState(1);const itemsPerPage=15;useEffect(()=>{if(isAuthenticated&&user!==null&&user!==void 0&&user.userId){axios.get(\"/api/users/\".concat(user.userId,\"/game-history\"),{withCredentials:true}).then(res=>{setGameHistory(res.data);}).catch(err=>{console.error('경기 내역 조회 실패:',err);});}},[isAuthenticated,user]);if(!isAuthenticated){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true});}const totalItems=gameHistory.length;const totalPages=Math.ceil(totalItems/itemsPerPage);const startIdx=(currentPage-1)*itemsPerPage;const endIdx=startIdx+itemsPerPage;const currentData=gameHistory.slice(startIdx,endIdx);const goToPage=pageNum=>{if(pageNum<1||pageNum>totalPages)return;setCurrentPage(pageNum);};return/*#__PURE__*/_jsxs(\"div\",{className:\"mh-page-wrapper\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"div\",{className:\"mh-page-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mh-container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mh-title\",children:\"\\uACBD\\uAE30 \\uB0B4\\uC5ED \\uC870\\uD68C\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mh-table-wrapper\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"mh-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\uB0A0\\uC9DC\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\uC644\\uB8CC \\uC5EC\\uBD80\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\uC0C1\\uB300 ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"A\\uD300 \\uC810\\uC218\"}),/*#__PURE__*/_jsx(\"th\",{children:\"B\\uD300 \\uC810\\uC218\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:currentData.map((match,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:match.gameDate||'날짜 없음'}),/*#__PURE__*/_jsx(\"td\",{children:match.completed?'완료':'진행 중'}),/*#__PURE__*/_jsx(\"td\",{children:match.opponentId}),/*#__PURE__*/_jsx(\"td\",{children:match.scoreTeamA}),/*#__PURE__*/_jsx(\"td\",{children:match.scoreTeamB})]},match.gameId||index))})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mh-pagination\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"page-btn\",onClick:()=>goToPage(currentPage-1),disabled:currentPage===1,children:\"\\uC774\\uC804\"}),Array.from({length:totalPages},(_,idx)=>/*#__PURE__*/_jsx(\"button\",{className:\"page-btn \".concat(currentPage===idx+1?'active':''),onClick:()=>goToPage(idx+1),children:idx+1},idx+1)),/*#__PURE__*/_jsx(\"button\",{className:\"page-btn\",onClick:()=>goToPage(currentPage+1),disabled:currentPage===totalPages,children:\"\\uB2E4\\uC74C\"})]})]})}),/*#__PURE__*/_jsx(Footer,{})]});}export default MatchHistory;","map":{"version":3,"names":["React","useState","useEffect","axios","useSelector","Navigate","Header","Footer","jsx","_jsx","jsxs","_jsxs","MatchHistory","isAuthenticated","user","state","auth","gameHistory","setGameHistory","currentPage","setCurrentPage","itemsPerPage","userId","get","concat","withCredentials","then","res","data","catch","err","console","error","to","replace","totalItems","length","totalPages","Math","ceil","startIdx","endIdx","currentData","slice","goToPage","pageNum","className","children","map","match","index","gameDate","completed","opponentId","scoreTeamA","scoreTeamB","gameId","onClick","disabled","Array","from","_","idx"],"sources":["/Users/dayeon/Desktop/shuttleplay/Frontend/src/pages/MatchHistory.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useSelector } from 'react-redux';\nimport { Navigate } from 'react-router-dom';\nimport Header from '../components/Header';\nimport Footer from '../components/Footer';\nimport '../styles/MatchHistory.css';\n\nfunction MatchHistory() {\n  const { isAuthenticated, user } = useSelector(state => state.auth);\n  const [gameHistory, setGameHistory] = useState([]);\n  const [currentPage, setCurrentPage] = useState(1);\n  const itemsPerPage = 15;\n\n  useEffect(() => {\n    if (isAuthenticated && user?.userId) {\n      axios.get(`/api/users/${user.userId}/game-history`, {\n        withCredentials: true\n      })\n        .then(res => {\n          setGameHistory(res.data);\n        })\n        .catch(err => {\n          console.error('경기 내역 조회 실패:', err);\n        });\n    }\n  }, [isAuthenticated, user]);\n\n  if (!isAuthenticated) {\n    return <Navigate to=\"/login\" replace />;\n  }\n\n  const totalItems = gameHistory.length;\n  const totalPages = Math.ceil(totalItems / itemsPerPage);\n  const startIdx = (currentPage - 1) * itemsPerPage;\n  const endIdx = startIdx + itemsPerPage;\n  const currentData = gameHistory.slice(startIdx, endIdx);\n\n  const goToPage = pageNum => {\n    if (pageNum < 1 || pageNum > totalPages) return;\n    setCurrentPage(pageNum);\n  };\n\n  return (\n    <div className=\"mh-page-wrapper\">\n      <Header/>\n\n      <div className=\"mh-page-content\">\n        <div className=\"mh-container\">\n          <h2 className=\"mh-title\">경기 내역 조회</h2>\n          <div className=\"mh-table-wrapper\">\n            <table className=\"mh-table\">\n              <thead>\n                <tr>\n                  <th>날짜</th>\n                  <th>완료 여부</th>\n                  <th>상대 ID</th>\n                  <th>A팀 점수</th>\n                  <th>B팀 점수</th>\n                </tr>\n              </thead>\n\n              <tbody>\n                {currentData.map((match, index) => (\n                  <tr key={match.gameId || index}>\n                    <td>{match.gameDate || '날짜 없음'}</td>\n                    <td>{match.completed ? '완료' : '진행 중'}</td>\n                    <td>{match.opponentId}</td>\n                    <td>{match.scoreTeamA}</td>\n                    <td>{match.scoreTeamB}</td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n\n          <div className=\"mh-pagination\">\n            <button className=\"page-btn\" onClick={() => goToPage(currentPage - 1)} disabled={currentPage === 1}>\n              이전\n            </button>\n            {Array.from({ length: totalPages }, (_, idx) => (\n              <button key={idx + 1} className={`page-btn ${currentPage === idx + 1 ? 'active' : ''}`} onClick={() => goToPage(idx + 1)}>\n                {idx + 1}\n              </button>\n            ))}\n            <button className=\"page-btn\" onClick={() => goToPage(currentPage + 1)} disabled={currentPage === totalPages}>\n              다음\n            </button>\n          </div>\n        </div>\n      </div>\n\n      <Footer/>\n    </div>\n  );\n}\n\nexport default MatchHistory;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}